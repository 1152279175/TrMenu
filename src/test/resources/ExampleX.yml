#
# 菜单的标题, 支持动态标题周期切换
#
Title:
  - 'Hello, TrMenu!'
  # - 'Support Animated Titles'

#
# 若有多个标题, 切换的周期 (ticks)
#
Title-Update: 40

Layout:
  - - '########`Close`'
    - '         '
    - ' S X     '
    - '         '
    - '####*###`Next`'

  - - '########`Close`'
    - '         '
    - ' *       '
    - '         '
    - '`Pre`########'

PlayerInventory:
  - - '         '
    - '         '
    - '         '
    - '         '

#
# 菜单的选项设置
#
Options:
  # 默认填充参数
  Default-Arguments: []
  # 默认布局页码
  Default-Layout: 0
  # 是否隐藏玩家容器
  Hide-Player-Inventory: true
  # 防频繁点击的间隔
  Min-Click-Delay: 200
  # 强制需要依赖的 PlaceholderAPI 拓展变量
  Depend-Expansions: ['server', 'player', 'progress', 'animations']

#
# 菜单绑定的快捷打开方式
#
Bindings:
  # 绑定命令, 支持正则
  Commands:
    - '(?i)example(-)?(gui)?(s)?'
  # 绑定到物品特征
  Items:
    - 'material:compass'
    - 'material:clock,lore:OPEN_MENU'

#
# 菜单的事件处理
#
Events:
  # 开启菜单事件
  Open:
    - condition: 'hasPerm.trmenu.use or is.{reason}.RELOAD or is.{reason}.CONSOLE'
      actions:
        - 'sound: BLOCK_CHEST_OPEN-1-0'
      deny:
        - 'sound: ENTITY_ITEM_BREAK-1-0'
        - 'title: <title=&c&l权限不足><subtitle=&7&l本菜单需要权限 &6&ltrmenu.use &7&l方能浏览>'
        - 'return'
  # 关闭菜单事件
  Close:
    - 'sound: BLOCK_CHEST_CLOSE-1-0'

#
# 菜单的图标
#
Icons:

  # 图标的唯一 ID, 可配合布局使用
  '#':
    # 显示图标的动态更新周期, 若设置多个则依次对应为 Material, Name, Lore, Slots
    # 设置一个即为所有项相同更新周期
    update: [-1, 10, 15, -1]
    # 菜单的显示部分
    display:
      material: Gray Stained Glass Pane
      name: ['&fTr&7Menu', '&7Tr&8Menu', '&8Tr&0Menu','&7Tr&8Menu']
      lore:
        - - '&7Thanks &f:> &7for using!'
        - - '&7Thanks &f:) &7for using!'
    # 点击菜单后执行的动作
    actions:
      all: 'sound: BLOCK_NOTE_BLOCK_PLING-1-2'

  'Close':
    update: [-1, 5, -1, -1]
    display:
      material: Red Stained Glass Pane
      name: ['&cC&7lose', '&cCl&7ose', '&cClo&7se', '&cClos&7e', '&cClose']
    actions:
      all: close
  'Next':
    display:
      material: Cyan Stained Glass Pane
      name: '&bN&3ext Page'
    actions:
      all:
        - 'page: 1'
        - 'sound: BLOCK_CHEST_OPEN-1-2'
  'Pre':
    display:
      material: Lime Stained Glass Pane
      name: '&aP&2revious Page'
    actions:
      all:
        - 'page: 0'
        - 'sound: BLOCK_CHEST_OPEN-1-2'
  '*':
    update: [-1, 5, 80, -1]
    display:
      material: '<skull:9842dc3b917b1a796c303e15105474a8e315de7982b6ca54feafb5a4d13d4e95>'
      name:
        - '&3&lSERVER'
        - '&b&lSE&3&lRVER'
        - '&3&lS&b&lER&3&lVER'
        - '&3&lSE&b&lRV&3&lER'
        - '&3&lSER&b&lVE&3&lR'
        - '&3&lSERV&b&lER'
      lore:
        - ''
        - '&8| &7RAM: &2%server_ram_used%/%server_ram_total% &7MB'
        - '&8[ %progress_bar_{server_ram_used}_m:{server_ram_total}_c:&3■_p:&7■_r:&8■_l:20% &8]'
        - ''
        - '&8| &7ONLINE: &e%server_online% &6${js: utils.getOnlinePlayers().size() > 1 ? "Players" : "Player"}'
        - '&8| &7UPTIME: &e%server_uptime%'
        - '&8| &7TPS: &a%server_tps%'
        - ''
        - '%animations_<flash>➥</flash>%'

          # - ''
          # - '&8▪ &7RAM: &a%server_ram_used%&7/&2%server_ram_total% MB &8(%math_({server_ram_used}/{server_ram_total})*100[precision:2]%%&8)'
          # - '&8[ %progress_bar_{server_ram_used}_m:{server_ram_total}_c:&3■_p:&7■_r:&8■_l:15% &8]'
          # - ''
          # - '&8▪ &7ONLINE: &e%server_online% &6Player(s)'
          # - '&8▪ &7UNIQUE JOINS: &a%server_unique_joins%'
          # - '&8▪ &7UPTIME: &3%server_uptime%'
          # - '&8▪ &7TPS: &a%server_tps%'
          # - ''
        # - '&7Designed by Arasple, Using TrMenu & PlaceholderAPI'

  # 'X':
  #   update: 20
  #   display:
  #     material: APPLE
  #     amount: '%server_time_ss%'
  #     name: '&3Tip'
  #     lore:
  #     - 'Text ....'
  #     - 'Text ....'
  #     - ''
  #     - '&f↓ &7Left-Click to show more info'
  #   actions:
  #     left:
  #       - 'set-meta: x_hide true'
  #       - 'refresh'
  #   icons:
  #     - condition: 'is.{meta:x_hide}.true'
  #       display:
  #         name: '&3Tip'
  #         lore:
  #         - 'Text ....'
  #         - 'Text ....'
  #         - 'Text ....'
  #         - '&bMore Text'
  #         - ''
  #         - '&f↑ &7Right-Click to hide extra-info'
  #       actions:
  #         right:
  #         - 'rem-meta: x_hide'
  #         - 'refresh'

  'S':
    display:
      material: Sign
      name: '&3Survery'
    actions:
      all:
        - close
        - catcher:
            target:
              type: CHAT
              before: 'tell: &3请输入一名玩家的名称'
              reactions:
                - condition: 'isOnline.${input_target}'
                  actions: 'tell: &7名称确认. &f${input_target}'
                  deny-actions:
                    - 'tell: &6抱歉但玩家 &c${input_target} &6不在线'
                    - 're-enter'
            amount:
              type: CHAT
              before: 'tell: &3请提供支付数额'
              reactions:
                - condition: 'isNumber.${input_amount}'
                  actions:
                    - 'tell: &7数额确认. &f${input_amount}'
                    - 'command: say I paied ${input_target} ${input_amount}'
                  deny-actions: 'tell: &6你打啥钱呢?'

#
# 菜单自定义周期性任务
#

Tasks:
# tikTok:
#   period: 20
#   task:
#     - condition: 'isOperator.'
#       actions:
#         - 'sound: BLOCK_NOTE_BLOCK_BIT-1-2'


# 菜单内置的自定义脚本变量
# 通过 ${ID_参数_参数} 的方式可以调用
#

Functions:
  health: |-
    function math(){
      return player.getHealth()
    }
    math()